"use strict";(self.webpackChunkskilltracker=self.webpackChunkskilltracker||[]).push([[298],{2298:(G,M,l)=>{l.r(M),l.d(M,{EmployeesModule:()=>c});var u=l(6895),r=l(6773),e=l(8256),b=l(7185),E=l(2340),x=l(529);class p{constructor(t){this.http=t,this.baseUrl=E.N.apiUrl}createUser(t){return this.http.post(this.baseUrl+"account/createaccountforuser",t)}getAllEmployees(){return this.http.get(this.baseUrl+"account/getAllEmployees")}getEmployeeSessions(t){return this.http.get(this.baseUrl+`account/getEmployeeSessions/${t}`)}addEmployeeSession(t){return this.http.post(this.baseUrl+"account/addEmployeeSession",t)}getAllSessions(){return this.http.get(this.baseUrl+"SkillsTracker/getAllSessions")}}p.\u0275fac=function(t){return new(t||p)(e.LFG(x.eN))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});var d=l(5593),T=l(47),C=l(805);function S(s,t){1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Activation Date"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Completed"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"See results"),e.qZA()())}function A(s,t){1&s&&e._UZ(0,"button",6),2&s&&e.Q6J("disabled",!0)}const I=function(s){return["../../../sessionReport",s]};function N(s,t){if(1&s&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e.YNc(7,A,1,1,"button",4),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"button",5),e.qZA()()),2&s){const o=t.$implicit;e.xp6(2),e.Oqu(o.sessionName),e.xp6(2),e.Oqu(e.xi3(5,5,o.activationDate,"medium")),e.xp6(3),e.Q6J("ngIf",o.isCompleted),e.xp6(2),e.Q6J("disabled",!o.isCompleted)("routerLink",e.VKq(8,I,o.id))}}const J=function(){return{"min-width":"50rem"}};class h{}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-employee-details-table"]],inputs:{sessions:"sessions"},decls:4,vars:3,consts:[[1,"table-container"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle","class","p-button-rounded p-button-text p-button-success",3,"disabled",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-info-circle",1,"p-button-rounded","p-button-text","p-button-primary",3,"disabled","routerLink"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle",1,"p-button-rounded","p-button-text","p-button-success",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"p-table",1),e.YNc(2,S,9,0,"ng-template",2),e.YNc(3,N,10,10,"ng-template",3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("value",o.sessions)("tableStyle",e.DdM(2,J)))},dependencies:[u.O5,r.rH,d.Hq,T.iA,C.jx,u.uU]});var n=l(433),w=l(1493),Z=l(5702);const U=function(){return{width:"550px",height:"350px"}},D=function(){return{width:"50%",margin:"5px"}};class g{constructor(t,o,i){this.employeeService=t,this.toastr=o,this.route=i,this.closeModalEvent=new e.vpe}ngOnInit(){this.newSessionForm=new n.cw({userId:new n.NI(""),sessionId:new n.NI}),this.getAllSessions(),this.route.paramMap.subscribe(t=>{this.userId=t.get("id")})}getAllSessions(){this.employeeService.getAllSessions().subscribe({next:t=>{this.sessions=t},error:t=>{this.toastr.error("Could not create session","Failed"),console.log(t)}})}closeModal(){this.showModal=!1,this.closeModalEvent.emit(this.showModal)}addEmployeeSession(){let t={userId:this.userId,sessionId:this.newSessionForm.get("sessionId")?.value};this.showModal=!1,this.closeModalEvent.emit(this.showModal),this.employeeService.addEmployeeSession(t).subscribe({next:()=>{this.toastr.success("Session added","Succes")},error:o=>{this.toastr.error("Could not create session","Failed"),console.log(o)}})}changeSession(t){this.newSessionForm.get("sessionId")?.setValue(t.value.id)}}function F(s,t){if(1&s&&e._UZ(0,"app-employee-details-table",8),2&s){const o=e.oxw();e.Q6J("sessions",o.employeeSessions)}}function q(s,t){1&s&&(e.TgZ(0,"div",9)(1,"p",10),e._uU(2,"There are no sessions for this employee"),e.qZA()())}g.\u0275fac=function(t){return new(t||g)(e.Y36(p),e.Y36(b._W),e.Y36(r.gz))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-add-session-modal"]],inputs:{showModal:"showModal"},outputs:{closeModalEvent:"closeModalEvent"},decls:5,vars:11,consts:[["header","Create User",3,"visible","resizable","modal","visibleChange","onHide"],[1,"d-flex","flex-column","align-items-stretch"],[1,"d-flex","flex-column",3,"formGroup"],["optionLabel","name","placeholder","Select Session",3,"options","onChange"],["pButton","","type","button","label","Add session",1,"align-self-end","mt-5",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(a){return o.showModal=a})("onHide",function(){return o.closeModal()}),e.TgZ(1,"div",1)(2,"form",2)(3,"p-dropdown",3),e.NdJ("onChange",function(a){return o.changeSession(a)}),e.qZA()(),e.TgZ(4,"button",4),e.NdJ("click",function(){return o.addEmployeeSession()}),e.qZA()()()),2&t&&(e.Akn(e.DdM(9,U)),e.Q6J("visible",o.showModal)("resizable",!1)("modal",!0),e.xp6(2),e.Q6J("formGroup",o.newSessionForm),e.xp6(1),e.Akn(e.DdM(10,D)),e.Q6J("options",o.sessions))},dependencies:[n._Y,n.JL,n.sg,d.Hq,w.V,Z.Lt]});const k=function(){return["../../"]};class y{constructor(t,o,i){this.route=t,this.toastr=o,this.employeeService=i,this.showModal=!1,this.employeeSessions=[]}ngOnInit(){this.route.paramMap.subscribe(t=>{this.userId=t.get("id"),this.getEmployeeSessions()})}showDialog(){this.showModal=!0}getEmployeeSessions(){this.employeeService.getEmployeeSessions(this.userId).subscribe(t=>{this.employeeSessions=t})}hideModal(t){console.log(t),this.getEmployeeSessions(),this.showModal=!1}}y.\u0275fac=function(t){return new(t||y)(e.Y36(r.gz),e.Y36(b._W),e.Y36(p))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-employee-details"]],decls:8,vars:5,consts:[[1,"container","employee-details-container"],[1,"d-flex","justify-content-between","mb-4"],["pButton","","type","button","label","Back",3,"routerLink"],["pButton","","type","button","label","Add session to user",3,"click"],[3,"sessions",4,"ngIf"],[1,"d-flex","justify-content-center","no-employee-sessions-outer"],["class","no-employee-sessions",4,"ngIf"],[3,"showModal","closeModalEvent"],[3,"sessions"],[1,"no-employee-sessions"],[1,"par-no-sessions-emp"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"button",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return o.showDialog()}),e.qZA()(),e.YNc(4,F,1,1,"app-employee-details-table",4),e.TgZ(5,"div",5),e.YNc(6,q,3,0,"div",6),e.qZA()(),e.TgZ(7,"app-add-session-modal",7),e.NdJ("closeModalEvent",function(a){return o.hideModal(a)}),e.qZA()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(4,k)),e.xp6(2),e.Q6J("ngIf",o.employeeSessions.length>0),e.xp6(2),e.Q6J("ngIf",0===o.employeeSessions.length),e.xp6(1),e.Q6J("showModal",o.showModal))},dependencies:[u.O5,r.rH,d.Hq,h,g],styles:[".no-employee-sessions[_ngcontent-%COMP%]{width:350px;height:100px;border:1px solid grey;box-shadow:5px 2px 5px 5px gray;display:flex;align-items:center;justify-content:center}.no-employee-sessions-outer[_ngcontent-%COMP%]{margin-top:200px}.employee-details-container[_ngcontent-%COMP%]{padding-left:100px;padding-right:100px;padding-top:20px}"]});var Y=l(8235),Q=l(1740);const L=function(){return{width:"550px",height:"550px"}},O=function(){return{width:"50%",margin:"5px"}};class f{constructor(t,o){this.employeesService=t,this.toastr=o,this.closeModalEvent=new e.vpe,this.roles=[{name:"Employee"},{name:"Reviewer"},{name:"Manager"}]}ngOnInit(){this.userInviteForm=new n.cw({firstName:new n.NI(""),lastName:new n.NI(""),email:new n.NI(""),password:new n.NI(""),role:new n.NI("")})}inviteUser(){let t={firstName:this.userInviteForm.get("firstName")?.value,lastName:this.userInviteForm.get("lastName")?.value,email:this.userInviteForm.get("email")?.value,password:this.userInviteForm.get("password")?.value,role:this.userInviteForm.get("role")?.value};this.showModal=!1,this.closeModalEvent.emit(this.showModal),this.employeesService.createUser(t).subscribe({next:()=>{this.toastr.success("User created","Succes")},error:o=>{this.toastr.error("Could not create user","Failed"),console.log(o)}}),console.log(t)}closeModal(){this.showModal=!1,this.closeModalEvent.emit(this.showModal)}changeRole(t){this.userInviteForm.get("role")?.setValue(t.value.name),console.log(this.userInviteForm.get("role")?.value)}}function B(s,t){1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"First Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Last Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"View Details"),e.qZA()())}f.\u0275fac=function(t){return new(t||f)(e.Y36(p),e.Y36(b._W))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-invite-modal"]],inputs:{showModal:"showModal"},outputs:{closeModalEvent:"closeModalEvent"},decls:9,vars:11,consts:[["header","Create User",3,"visible","resizable","modal","visibleChange","onHide"],[1,"d-flex","flex-column","align-items-stretch"],[1,"d-flex","flex-column",3,"formGroup"],["type","text","pInputText","","placeholder","Fisrt Name","formControlName","firstName"],["type","text","pInputText","","placeholder","Last Name","formControlName","lastName"],["type","text","pInputText","","placeholder","Email","formControlName","email"],["type","password","pInputText","","placeholder","Password","formControlName","password"],["optionLabel","name","placeholder","Role",3,"options","onChange"],["pButton","","type","button","label","Create user",1,"align-self-end","mt-5",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(a){return o.showModal=a})("onHide",function(){return o.closeModal()}),e.TgZ(1,"div",1)(2,"form",2),e._UZ(3,"input",3)(4,"input",4)(5,"input",5)(6,"input",6),e.TgZ(7,"p-dropdown",7),e.NdJ("onChange",function(a){return o.changeRole(a)}),e.qZA()(),e.TgZ(8,"button",8),e.NdJ("click",function(){return o.inviteUser()}),e.qZA()()()),2&t&&(e.Akn(e.DdM(9,L)),e.Q6J("visible",o.showModal)("resizable",!1)("modal",!0),e.xp6(2),e.Q6J("formGroup",o.userInviteForm),e.xp6(5),e.Akn(e.DdM(10,O)),e.Q6J("options",o.roles))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,d.Hq,w.V,Q.o,Z.Lt],styles:["input[_ngcontent-%COMP%]{margin:5px}"]});const H=function(s){return["./employee",s]};function R(s,t){if(1&s&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"button",3),e.qZA()()),2&s){const o=t.$implicit;e.xp6(2),e.Oqu(o.email),e.xp6(2),e.Oqu(o.firstName),e.xp6(2),e.Oqu(o.lastName),e.xp6(2),e.Q6J("routerLink",e.VKq(4,H,o.id))}}const z=function(){return{"min-width":"50rem"}};class _{editSession(t){console.log(t)}}function j(s,t){1&s&&e._UZ(0,"p-progressBar",6)}function P(s,t){if(1&s&&e._UZ(0,"app-employees-table",7),2&s){const o=e.oxw();e.Q6J("employees",o.employees)}}_.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-employees-table"]],inputs:{employees:"employees"},decls:3,vars:3,consts:[[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pButton","","pRipple","","type","button","icon","pi pi-file-edit",1,"p-button-rounded","p-button-text","p-button-secondary",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"p-table",0),e.YNc(1,B,9,0,"ng-template",1),e.YNc(2,R,9,6,"ng-template",2),e.qZA()),2&t&&e.Q6J("value",o.employees)("tableStyle",e.DdM(2,z))},dependencies:[r.rH,d.Hq,T.iA,C.jx]});class v{constructor(t,o){this.employeesService=t,this.toastr=o,this.showModal=!1,this.employees=[],this.isDataLoaded=!1}ngOnInit(){this.getAllEmployees()}showDialog(){this.showModal=!0}hideModal(t){this.showModal=!1,this.getAllEmployees()}getAllEmployees(){this.employeesService.getAllEmployees().subscribe({next:t=>{this.employees=t,this.isDataLoaded=!0},error:t=>{this.toastr.error("Could not load employees","Failed")}})}}v.\u0275fac=function(t){return new(t||v)(e.Y36(p),e.Y36(b._W))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-employees"]],decls:6,vars:3,consts:[[1,"container","employees-table-container"],[1,"d-flex","justify-content-end","mb-4"],["pButton","","type","button","label","Create user",3,"click"],["mode","indeterminate","class","progress-bar",4,"ngIf"],[3,"employees",4,"ngIf"],[3,"showModal","closeModalEvent"],["mode","indeterminate",1,"progress-bar"],[3,"employees"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.showDialog()}),e.qZA()(),e.YNc(3,j,1,0,"p-progressBar",3),e.YNc(4,P,1,1,"app-employees-table",4),e.qZA(),e.TgZ(5,"app-invite-modal",5),e.NdJ("closeModalEvent",function(a){return o.hideModal(a)}),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",!o.isDataLoaded),e.xp6(1),e.Q6J("ngIf",o.isDataLoaded),e.xp6(1),e.Q6J("showModal",o.showModal))},dependencies:[u.O5,d.Hq,Y.k,f,_],styles:[".employees-table-container[_ngcontent-%COMP%]{padding-top:20px}.progress-bar[_ngcontent-%COMP%]{display:block!important;height:10px!important}"]});const V=[{path:"",component:v},{path:"employee/:id",component:y}];class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[r.Bz.forChild(V),r.Bz]});var X=l(4466);class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[u.ez,m,X.m]})}}]);