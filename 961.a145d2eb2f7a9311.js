"use strict";(self.webpackChunkskilltracker=self.webpackChunkskilltracker||[]).push([[961],{961:(Q,h,i)=>{i.r(h),i.d(h,{SkillTrackerModule:()=>u});var b=i(6895),A=i(4466),p=i(6773),e=i(8256),Z=i(433),T=i(1203),k=i(7185),S=i(5593);function v(n,t){if(1&n){const s=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(o){const f=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.selectedQuestion(o,f))}),e.TgZ(1,"h4",4),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.TgZ(5,"div",5),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.qZA()()}if(2&n){const s=t.$implicit;e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.firstAnswer),e.xp6(2),e.Oqu(s.secondAnswer),e.xp6(2),e.Oqu(s.thirdAnswer),e.xp6(2),e.Oqu(s.fourthAnswer)}}class d{constructor(t,s,r,o,c){this.fb=t,this.trackerService=s,this.toastr=r,this.router=o,this.route=c,this.answers=[]}ngOnInit(){this.route.paramMap.subscribe(t=>{this.sessionId=Number.parseInt(t.get("id")),this.getActiveSessionQuestions(this.sessionId)})}getActiveSessionQuestions(t){this.trackerService.getEmployeeSessionQuestions(t).subscribe(s=>{console.log(s),this.questions=s})}selectedQuestion(t,s){let r=t.target.innerHTML;for(let[o,c]of Object.entries(s))c===r&&t.target.classList.contains("answer")&&this.tryAddAnswer(s.id,o,t)}submitSessionQuestions(){const t={sessionId:this.sessionId,answers:this.answers};console.log(this.answers),this.trackerService.submitSessionQuestions(t).subscribe({next:s=>{console.log(s),this.router.navigate(["sessionReport",s.userSessionId]),this.toastr.success("Submitted succesfully","Succes")},error:s=>{this.toastr.error("Could not create session","Failed")}})}tryAddAnswer(t,s,r){let o=null;"firstAnswer"===s?o="A":"secondAnswer"===s?o="B":"thirdAnswer"===s?o="C":"fourthAnswer"===s&&(o="D");let c=!1,f=null;if(this.answers.length>0)for(let l=0;l<this.answers.length;l++)if(this.answers[l].questionId===t){f=l,c=!0;break}c?(this.answers.splice(f,1),this.answers.push({questionId:t,answered:o}),r.target.parentElement.querySelector(".selected").classList.remove("selected"),r.target.classList.add("selected")):(this.answers.push({questionId:t,answered:o}),r?.target.classList.add("selected")),console.log(this.answers)}}d.\u0275fac=function(t){return new(t||d)(e.Y36(Z.qu),e.Y36(T.$),e.Y36(k._W),e.Y36(p.F0),e.Y36(p.gz))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-session-assigment"]],decls:3,vars:1,consts:[[1,"question-container"],["class","questions",3,"click",4,"ngFor","ngForOf"],["pButton","","type","button","label","Submit answers",1,"mb-4",3,"click"],[1,"questions",3,"click"],[1,"question"],[1,"answer"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,v,11,5,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return s.submitSessionQuestions()}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",s.questions))},dependencies:[b.sg,S.Hq],styles:[".selected[_ngcontent-%COMP%]{background-color:#8ed0ff}.answer[_ngcontent-%COMP%]{cursor:pointer;border-bottom:1px solid rgb(142,208,255)}.questions[_ngcontent-%COMP%]{width:50%;padding:15px}.question-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}"]});var C=i(7095),q=i(47),y=i(805);function x(n,t){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Activation Date"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Completed"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Take assigmanet"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"See results"),e.qZA()())}function w(n,t){1&n&&e._UZ(0,"button",7),2&n&&e.Q6J("disabled",!0)}const O=function(n){return["./session",n]},_=function(n){return["../sessionReport",n]};function M(n,t){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e.YNc(7,w,1,1,"button",4),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"button",5),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"button",6),e.qZA()()),2&n){const s=t.$implicit;e.xp6(2),e.Oqu(s.sessionName),e.xp6(2),e.Oqu(e.xi3(5,7,s.activationDate,"medium")),e.xp6(3),e.Q6J("ngIf",s.isCompleted),e.xp6(2),e.Q6J("disabled",s.isCompleted)("routerLink",e.VKq(10,O,s.id)),e.xp6(2),e.Q6J("disabled",!s.isCompleted)("routerLink",e.VKq(12,_,s.id))}}const U=function(){return{"min-width":"50rem"}};class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-sessions-table"]],inputs:{sessions:"sessions"},decls:4,vars:3,consts:[[1,"table-container"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle","class","p-button-rounded p-button-text p-button-success",3,"disabled",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-file-export",1,"p-button-rounded","p-button-text","p-button-help",3,"disabled","routerLink"],["pButton","","pRipple","","type","button","icon","pi pi-info-circle",1,"p-button-rounded","p-button-text","p-button-primary",3,"disabled","routerLink"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle",1,"p-button-rounded","p-button-text","p-button-success",3,"disabled"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"p-table",1),e.YNc(2,x,11,0,"ng-template",2),e.YNc(3,M,12,14,"ng-template",3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("value",s.sessions)("tableStyle",e.DdM(2,U)))},dependencies:[b.O5,p.rH,S.Hq,q.iA,y.jx,b.uU],styles:[".table-container[_ngcontent-%COMP%]{padding-top:50px}"]});class g{constructor(t,s){this.authService=t,this.skillTrackerService=s}ngOnInit(){this.authService.currentUserData.subscribe(t=>{this.userId=t.userId}),this.getEmployeeSessions()}getEmployeeSessions(){this.skillTrackerService.getEmployeeSessions(this.userId).subscribe(t=>{this.sessions=t,console.log(t)})}}g.\u0275fac=function(t){return new(t||g)(e.Y36(C.e),e.Y36(T.$))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-skill-tracker"]],decls:2,vars:1,consts:[[1,"container"],[3,"sessions"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-sessions-table",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("sessions",s.sessions))},dependencies:[m],styles:[".selected[_ngcontent-%COMP%]{background-color:#8ed0ff}.answer[_ngcontent-%COMP%]{cursor:pointer;border-bottom:1px solid rgb(142,208,255)}.questions[_ngcontent-%COMP%]{width:50%;padding:15px}.question-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}"]});const I=[{path:"",component:g},{path:"session/:id",component:d}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[p.Bz.forChild(I),p.Bz]});class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[b.ez,a,A.m]})}}]);